<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Infix ops - Pony Tutorial</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Pony Tutorial">
    <meta property="og:image" content="None/../../">
    <meta name="apple-mobile-web-app-title" content="Pony Tutorial">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-20d5debb47.css">
    
    
      
      
      
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../../css/highlight.css">
    
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Expressions <i class="icon icon-link"></i>
              
            
          </span>
        
        Infix ops
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="/" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>Pony Tutorial </strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <span class="section">Getting started</span>
    <ul>
      
        
  <li>
    <a class="" title="Welcome!" href="../..">
      Welcome!
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="What you need to start" href="../../getting-started/what-you-need-to-start/">
      What you need to start
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Installation" href="../../getting-started/installation/">
      Installation
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Helloworld" href="../../getting-started/helloworld/">
      Helloworld
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How it works" href="../../getting-started/how-it-works/">
      How it works
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Whitespace" href="../../getting-started/whitespace/">
      Whitespace
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Types</span>
    <ul>
      
        
  <li>
    <a class="" title="Static vs dynamic" href="../../types/static-vs-dynamic/">
      Static vs dynamic
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Classes" href="../../types/classes/">
      Classes
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Primitives" href="../../types/primitives/">
      Primitives
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Actors" href="../../types/actors/">
      Actors
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Traits and interfaces" href="../../types/traits-and-interfaces/">
      Traits and interfaces
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Type aliases" href="../../types/type-aliases/">
      Type aliases
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Type expressions" href="../../types/type-expressions/">
      Type expressions
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Delegates" href="../../types/delegates/">
      Delegates
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Expressions</span>
    <ul>
      
        
  <li>
    <a class="" title="Variables" href="../variables/">
      Variables
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Infix ops" href="./">
      Infix ops
    </a>
    
      
        
      
      
    
  </li>

      
        
  <li>
    <a class="" title="Control structures" href="../control-structures/">
      Control structures
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Methods" href="../methods/">
      Methods
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Exceptions" href="../exceptions/">
      Exceptions
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Sugar" href="../sugar/">
      Sugar
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Object literals" href="../object-literals/">
      Object literals
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Partial application" href="../partial-application/">
      Partial application
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Capabilities</span>
    <ul>
      
        
  <li>
    <a class="" title="Object capabilities" href="../../capabilities/object-capabilities/">
      Object capabilities
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Reference capabilities" href="../../capabilities/reference-capabilities/">
      Reference capabilities
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Guarantees" href="../../capabilities/guarantees/">
      Guarantees
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Aliasing" href="../../capabilities/aliasing/">
      Aliasing
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Consume and destructive read" href="../../capabilities/consume-and-destructive-read/">
      Consume and destructive read
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Recovering capabilities" href="../../capabilities/recovering-capabilities/">
      Recovering capabilities
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Combining capabilities" href="../../capabilities/combining-capabilities/">
      Combining capabilities
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Passing and sharing" href="../../capabilities/passing-and-sharing/">
      Passing and sharing
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Capability subtyping" href="../../capabilities/capability-subtyping/">
      Capability subtyping
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Arrow types" href="../../capabilities/arrow-types/">
      Arrow types
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Trust boundary" href="../../capabilities/trust-boundary/">
      Trust boundary
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Generics</span>
    <ul>
      
        
  <li>
    <a class="" title="Polymorphic types" href="../../generics/polymorphic-types/">
      Polymorphic types
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Polymorphic methods" href="../../generics/polymorphic-methods/">
      Polymorphic methods
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="Code sharing" href="../../composition-inheritance/code-sharing/">
      Code sharing
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Pattern Matching</span>
    <ul>
      
        
  <li>
    <a class="" title="Match" href="../../pattern-matching/match/">
      Match
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="As" href="../../pattern-matching/as/">
      As
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Packages</span>
    <ul>
      
        
  <li>
    <a class="" title="Package system" href="../../packages/package-system/">
      Package system
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Use statement" href="../../packages/use-statement/">
      Use statement
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Builtin" href="../../packages/builtin/">
      Builtin
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Use conditions" href="../../packages/platform/">
      Use conditions
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="Compiler args" href="../../compiler-clargs/clargs/">
      Compiler args
    </a>
    
  </li>

          
            
  <li>
    <span class="section">C FFI</span>
    <ul>
      
        
  <li>
    <a class="" title="Calling C" href="../../c-ffi/calling-c/">
      Calling C
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Linking to C Libraries" href="../../c-ffi/linking-c/">
      Linking to C Libraries
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="C abi" href="../../c-ffi/c-abi/">
      C abi
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">The Runtime</span>
    <ul>
      
        
  <li>
    <a class="" title="Otp" href="../../runtime/otp/">
      Otp
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Memory allocation" href="../../runtime/memory-allocation/">
      Memory allocation
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Garbage collection" href="../../runtime/garbage-collection/">
      Garbage collection
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="Examples" href="../../examples/examples/">
      Examples
    </a>
    
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <p>Infix operators take two operands and are written between those operands. Arithmetic and comparison operators are the most common:</p>
<pre><code class="pony">1 + 2
a &lt; b
</code></pre>

<p>Pony has pretty much the same set of infix operators as other languages.</p>
<h1 id="precedence">Precedence</h1>
<p>When using infix operators in complex expressions a key question is the <strong>precedence</strong>, i.e. which operator is evaluated first. Given this expression:</p>
<pre><code class="pony">1 + 2 * 3
</code></pre>

<p>We will get a value of 9 if we evaluate the addition first and 7 if we evaluate the multiplication first. In mathematics there are rules about the order in which to evaluate operators and most programming languages follow this approach.</p>
<p>The problem with this is that the programmer has to remember the order and people aren't very good at things like that. Most people will remember to do multiplication before addition, but what about left bit shifting versus bitwise and? Sometimes people misremember (or guess wrong) and that leads to bugs. Worse, those bugs are often very hard to spot.</p>
<p>Pony takes a different approach and outlaws infix precedence. Any expression where more than one infix operator is used <strong>must</strong> use parentheses to remove the ambiguity. If you fail to do this the compiler will complain.</p>
<p>This means that the example above is illegal in Pony and should be rewritten as:</p>
<pre><code class="pony">1 + (2 * 3)
</code></pre>

<p>Repeated use of a single operator however is fine:</p>
<pre><code class="pony">1 + 2 + 3
</code></pre>

<h1 id="operator-aliasing">Operator aliasing</h1>
<p>Most infix operators in Pony are actually aliases for functions. The left operand is the receiver the function is called on and the right operand is passed as an argument. For example the following expressions are equivalent:</p>
<pre><code class="pony">x + y
x.add(y)
</code></pre>

<p>This means that <code>+</code> is not a special symbol that can only be applied to magic types. Any type can provide its own <code>add</code> function and the programmer can then use <code>+</code> with that type, if they want to.</p>
<p>When defining your own <code>add</code> function there is no restriction on the types of the parameter or the return type. The right side of the <code>+</code> will have to match the parameter type and the whole <code>+</code> expression will have the type that <code>add</code> returns.</p>
<p>Here's a full example for defining a type which allows use of <code>+</code>. This is all you need:</p>
<pre><code class="pony">// Define a suitable type
class Pair
  var _x: U32 = 0
  var _y: U32 = 0

  new create(x: U32, y: U32) =&gt;
    _x = x
    _y = y

  // Define a + function
  fun add(other: Pair): Pair =&gt;
    Pair(_x + other._x, _y + other._y)

// Now let's use it
class Foo
  fun foo() =&gt;
    var x = Pair(1, 2)
    var y = Pair(3, 4)
    var z = x + y
</code></pre>

<p>Since Pony does not allow overloading of functions by argument type, each type can only have a single <code>add</code> function. It is possible to overload infix operators to some degree using union types or f-bounded polymorphism, but this is beyond the scope of this tutorial. See the Pony standard library for further information.</p>
<p>You do not have to worry about any of this if you don't want to. You can simply use the existing infix operators for numbers just like any other language and not provide them for your own types.</p>
<p>The full list of infix operators that are aliases for functions is:</p>
<hr />
<table>
<thead>
<tr>
<th>Operator</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>add()</td>
<td>Addition</td>
</tr>
<tr>
<td>-</td>
<td>sub()</td>
<td>Subtraction</td>
</tr>
<tr>
<td>*</td>
<td>mul()</td>
<td>Multiplication</td>
</tr>
<tr>
<td>/</td>
<td>div()</td>
<td>Division</td>
</tr>
<tr>
<td>%</td>
<td>mod()</td>
<td>Modulus</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>shl()</td>
<td>Left bit shift</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>shr()</td>
<td>Right bit shift</td>
</tr>
<tr>
<td>and</td>
<td>op_and()</td>
<td>And, both bitwise and logical</td>
</tr>
<tr>
<td>or</td>
<td>op_or()</td>
<td>Or, both bitwise and logical</td>
</tr>
<tr>
<td>xor</td>
<td>op_xor()</td>
<td>Xor, both bitwise and logical</td>
</tr>
<tr>
<td>==</td>
<td>eq()</td>
<td>Equality</td>
</tr>
<tr>
<td>!=</td>
<td>ne()</td>
<td>Non-equality</td>
</tr>
<tr>
<td>&lt;</td>
<td>lt()</td>
<td>Less then</td>
</tr>
<tr>
<td>&lt;=</td>
<td>le()</td>
<td>Less than or equal</td>
</tr>
<tr>
<td>&gt;=</td>
<td>ge()</td>
<td>Greater than or equal</td>
</tr>
<tr>
<td>&gt;</td>
<td>gt()</td>
<td>Greater than</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="short-circuiting">Short circuiting</h1>
<p>The <code>and</code> and <code>or</code> operators use <strong>short circuiting</strong> when used with Bool variables. This means that the first operand is always evaluated, but the second is only evaluated if it can affect the result.</p>
<p>For <code>and</code>, if the first operand is <strong>false</strong> then the second operand is not evaluated, since it cannot affect the result.</p>
<p>For <code>or</code>, if the first operand is <strong>true</strong> then the second operand is not evaluated, since it cannot affect the result.</p>
<p>This is a special feature built into the compiler, it cannot be used with operator aliasing for any other type.</p>
<h1 id="unary-operators">Unary operators</h1>
<p>The unary operators are handled in the same manner, but with only one operand. For example the following expressions are equivalent:</p>
<pre><code class="pony">-x
x.neg()
</code></pre>

<p>The full list of unary operators that are aliases for functions is:</p>
<hr />
<table>
<thead>
<tr>
<th>Operator</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>neg()</td>
<td>Arithmetic negation</td>
</tr>
<tr>
<td>not</td>
<td>op_not()</td>
<td>Not, both bitwise and logical</td>
</tr>
</tbody>
</table>
<hr />
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../variables/" title="Variables">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Variables
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../control-structures/" title="Control structures">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Control structures
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = '';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
      <script src="../../js/highlight.pack.js"></script>
    
    
  </body>
</html>